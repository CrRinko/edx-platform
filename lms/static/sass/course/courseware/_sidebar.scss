// lms - views - course outline
// ====================
// TO-DO: rename partial to _outline instead of _sidebar
 
// Table of Contents 
// * +Outline - Sidebar [TO-DO]
// * +CASE: Outline - Home [TO-DO]
// * +Outline - Sidebar Old [TO-DO]


// +Outline - Sidebar 
// ==================== 
.course-wrapper .course-index {
  @extend .tran;
  @include box-sizing(border-box);
  @include border-right(1px solid $border-color-l3);
  @include border-radius(3px, 0, 0, 3px);
  width: flex-grid(3);

  .ui-accordion {


    .chapter {
      background-color: $sidebar-chapter-bg;
      border-bottom: 1px solid $border-color-l3;

      &.is-open {
        background: $white;
      }

      &:first-child {
        border-radius: 3px 0 0 0;
      }

      &:last-child {
        border-radius: 0 0 0 3px;
        box-shadow: 0 1px 0 $white inset;
      }

      &:hover, &:focus {
        background-color: $action-primary-focused-fg;
      }
    }
  }

  .ui-accordion-header {
    padding: ($baseline/2);
  }

  .ui-accordion-content {
    padding: 0 $baseline ($baseline/2);

    // TO-DO: add class instead of using element selector
    a {
      border-radius: 3px;
      padding: ($baseline/2) ($baseline*2) ($baseline/2) ($baseline/2);

    }

  }
}

// +CASE: Outline - Home 
// ==================== 
.course-wrapper.home .course-index {
  // TO-DO: replace .course-wrapper with nesting using .view-outline once tag has been added to <body>
  @extend %content-primary;
  @include border-right(1px solid $border-color-l3);

  .wrapper-course-nav-tools {
    padding: ($baseline/2);

    // UI: courseware search bar
    .course-tools-header {
      @extend %t-regular;
      @include box-sizing(border-box);
      width: flex-grid(3);
      display: inline-block;
      margin: ($baseline/4);
    }


    // UI: courseware search bar
    .courseware-search-bar {
      @include box-sizing(border-box);
      width: flex-grid(3);
      display: inline-block;
      position: relative;
      float: right;

      .search-field {
        @include box-sizing(border-box);
        box-shadow: none;
        border-radius: 3px;
        width: 100%;
        background: $white-t1;

        &.is-active {
          background: $white;
        }
      }

      .search-button, .cancel-button {
        @include box-sizing(border-box);
        @include right(12px);
        color: #888;
        font-size: 14px;
        font-weight: normal;
        display: block;
        position: absolute;
        top: 0;
        height: 35px;
        line-height: 35px;
        padding: 0;
        border: none;
        box-shadow: none;
        background: transparent;
      }

      .cancel-button {
        display: none;
      }

    }


  }

  .chapter {
    @include box-sizing(border-box);
    background-color: $gray-l6;
    border-radius: 3px;
    border: 1px solid $border-color-l3;
    margin: ($baseline/2);

    &:first-child, &:last-child {
      border-radius: 3px;
    }

    &:hover, &:focus {
      border-color: $action-primary-focused-bg;
    }

  }
}

// +UI: Outline - Supplemental Info 
// ==================== 
.course-content {
  padding:  $baseline;

  .header-outline-info {
    @extend %t-title7;
    @extend %t-ultrastrong;
    text-transform: uppercase;
    margin-bottom: 0;
  }
  
  .content-outline-info {
    margin-bottom: $baseline;
    display: inline-block;

  }
}


// +Outline - Sidebar Old
// ==================== 
// TO-DO: review for sass cleanups and update to current standards 
.course-index {
  @extend .sidebar-old;

  #open_close_accordion {
    display: none;
  }

  header {
    max-height: 47px;

    h2 {
      white-space: nowrap;
    }
  }

  .ui-accordion {
    width: auto;
    font-size: 14px;

    h3 {
      border-radius: 0;
      margin: 0;
      overflow: visible;
      font-size: 16px;

      &:hover, &:focus {
        color: #666;
      }

      &.ui-state-hover, &.ui-state-focus {
        a {
          color: #666;
        }
      }

      &.ui-accordion-header {
        color: $black;

        a {
          border-radius: 0;
          box-shadow: none;
          @include padding-left(19px);
          color: $link-color;
        }

        &.ui-state-active {
          @extend .active;
          border-bottom: none;

          &:hover, &:focus {
            background: none;
          }
        }

        span.ui-icon {
          opacity: 0.3;
          background-image: url("/static/images/ui-icons_222222_256x240.png");  // jQuery UI sprite

          &.ui-icon-triangle-1-e {

            // CASE: left to right layout
            @include ltr {
              background-position: -32px -16px; // jQuery UI east arrow position
            }

           // CASE: right to left layout
           @include rtl {
              background-position: -96px -16px; // jQuery UI west arrow position
            }
          }
        }
      }
    }

    .chapter {
      @include box-sizing(border-box);
      background-color: $sidebar-chapter-bg;
      @include transition(background-color .1s linear 0s);

    }

    ul.ui-accordion-content {
      background: transparent;
      border: none;
      border-radius: 0;
      margin: 0;
      overflow: auto;

      li {
        border-bottom: 0;
        border-radius: 0;
        margin-bottom: ($baseline/5);

        a {
          background: transparent;
          display: block;
          position: relative;
          text-decoration: none;

          p {
            font-weight: bold;
            font-family: $sans-serif;
            margin-bottom: 0;
            line-height: 1.3;

            &.subtitle {
              color: #666;
              font-size: 13px;
              font-weight: normal;
              display: block;
              margin: 0;

              &:empty {
                display: none;
              }
            }
          }

          &:hover, &:focus {
            background: $shadow-l1;

            > a p {
              color: #333;
            }
          }

          &:active {
            box-shadow: inset 0 1px 14px 0 $shadow-l1;

            &:after {
              opacity: 1.0;
              right: 15px;
            }
          }
        }

        &.active {
          font-weight: bold;
          background-color: $gray-l5;

          &:after {
            content: 'â€º';
            position: absolute;
            top: 50%;
            right: 20px;
            margin-top: -13px;
            font-size: 30px;
            font-weight: normal;
            color: #333;
            opacity: 0;
            @include transition(none);
          }

          > a {
            border: 1px solid $border-color-1;
            box-shadow: 0 1px 0 rgba(255, 255, 255, .35) inset;
            background: $sidebar-active-image;

            &:after {
              opacity: 1.0;
              right: 15px;
            }

            p {
              color: #333;
            }
          }

          span.subtitle {
            font-weight: normal;
          }
        }

        &.graded {
         > a {
           > img {
             margin: auto;
             position: absolute;
             top: 0;
             bottom: 0;
             right: ($baseline/2);
           }
          }

          &.active > a {
            background: linear-gradient(to bottom, #e6e6e6, #d6d6d6);
          }
        }
      }
    }
  }
}
